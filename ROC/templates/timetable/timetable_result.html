{% extends 'base/base.html' %}
{% load bootstrap3 %}

{% block content %}
<h2 class="text-center">智能课程表</h2>
<br>
<br>
<div class="col-md-10 col-md-offset-1">
    {% for result in results %}
    <table id="form_{{forloop.counter}}"class="table table-bordered"
    style="word-break:break-all;{% if not forloop.first %}display:none;{% endif %}">
        <thead>
            <tr>
                <th></th>
                <th class="text-center">星期一</th>
                <th class="text-center">星期二</th>
                <th class="text-center">星期三</th>
                <th class="text-center">星期四</th>
                <th class="text-center">星期五</th>
                <th class="text-center">星期六</th>
                <th class="text-center">星期日</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>第一节</td>
                <td>{{result.0.0}}</td>
                <td>{{result.1.0}}</td>
                <td>{{result.2.0}}</td>
                <td>{{result.3.0}}</td>
                <td>{{result.4.0}}</td>
                <td>{{result.5.0}}</td>
                <td>{{result.6.0}}</td>
            </tr>
            <tr>
                <td>第二节</td>
                <td>{{result.0.1}}</td>
                <td>{{result.1.1}}</td>
                <td>{{result.2.1}}</td>
                <td>{{result.3.1}}</td>
                <td>{{result.4.1}}</td>
                <td>{{result.5.1}}</td>
                <td>{{result.6.1}}</td>
            </tr>
            <tr>
                <td>第三节</td>
                <td>{{result.0.2}}</td>
                <td>{{result.1.2}}</td>
                <td>{{result.2.2}}</td>
                <td>{{result.3.2}}</td>
                <td>{{result.4.2}}</td>
                <td>{{result.5.2}}</td>
                <td>{{result.6.2}}</td>
            </tr>
            <tr>
                <td>第四节</td>
                <td>{{result.0.3}}</td>
                <td>{{result.1.3}}</td>
                <td>{{result.2.3}}</td>
                <td>{{result.3.3}}</td>
                <td>{{result.4.3}}</td>
                <td>{{result.5.3}}</td>
                <td>{{result.6.3}}</td>
            </tr>
            <tr>
                <td>第五节</td>
                <td>{{result.0.4}}</td>
                <td>{{result.1.4}}</td>
                <td>{{result.2.4}}</td>
                <td>{{result.3.4}}</td>
                <td>{{result.4.4}}</td>
                <td>{{result.5.4}}</td>
                <td>{{result.6.4}}</td>
            </tr>
            <tr>
                <td>第六节</td>
                <td>{{result.0.5}}</td>
                <td>{{result.1.5}}</td>
                <td>{{result.2.5}}</td>
                <td>{{result.3.5}}</td>
                <td>{{result.4.5}}</td>
                <td>{{result.5.5}}</td>
                <td>{{result.6.5}}</td>
            </tr>
        </tbody>
    </table>
    {% endfor %}
</div>
<br>
<br>
<div class="col-md-10 col-md-offset-1">
    <button id="button_prev" onclick="prev(1)" type="submit" class="btn btn-success pull-left" style="display:none;">上一方案</button>
    <button id="button_next" onclick="next(1)" type="submit" class="btn btn-success pull-right"
    {% if results|length == 1 %} style="display:none;" {% endif %}>下一方案</button>
</div>
{% endblock %}

{% block scripts %}
<script>
    function prev(index) {
        var prev;
        if(prev = $("#form_" + (index-1).toString())) {
            $("#form_" + index.toString()).css("display", "none");
            prev.css("display", "table");
            $("#button_prev").attr('onclick', 'prev(' + (index-1) + ')');
            $("#button_next").attr('onclick', 'next(' + (index-1) + ')');
            if($("#form_" + (index-2).toString()).length > 0) {
                $("#button_prev").css("display", "inline-block");
            } else {
                $("#button_prev").css("display", "none");
            }
            $("#button_next").css("display", "inline-block");
        }
    }
    function next(index) {
        var next;
        if(next = $("#form_" + (index+1).toString())) {
            $("#form_" + index.toString()).css("display", "none");
            next.css("display", "table");
            $("#button_prev").attr('onclick', 'prev(' + (index+1) + ')');
            $("#button_next").attr('onclick', 'next(' + (index+1) + ')');
            $("#button_prev").css("display", "inline-block");
            if($("#form_" + (index+2).toString()).length > 0) {
                $("#button_next").css("display", "inline-block");
            } else {
                $("#button_next").css("display", "none");
            }
        }
    }
</script>
{% endblock %}